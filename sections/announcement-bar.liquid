{%- if section.settings.text != blank -%}
  <div class="announcement-bar color-{{ section.settings.color_scheme }}">
    <div class="announcement-bar__content">
      {%- if section.settings.link != blank -%}
        <a href="{{ section.settings.link }}" class="announcement-bar__link">
      {%- endif -%}
      
      <p class="announcement-bar__text">
        {{ section.settings.text | escape }}
      </p>
      
      {%- if section.settings.link != blank -%}
        </a>
      {%- endif -%}
    </div>
  </div>
{%- endif -%}

{% schema %}
{
  "name": "t:sections.announcement-bar.name",
  "max_blocks": 1,
  "enabled_on": {
    "groups": ["custom.header", "header"]
  },
  "settings": [
    {
      "type": "text",
      "id": "text",
      "default": "Welcome to our store",
      "label": "t:sections.announcement-bar.settings.text.label"
    },
    {
      "type": "url",
      "id": "link",
      "label": "t:sections.announcement-bar.settings.link.label"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent",
          "label": "t:sections.all.colors.accent.label"
        },
        {
          "value": "background-1",
          "label": "t:sections.all.colors.background_1.label"
        },
        {
          "value": "background-2",
          "label": "t:sections.all.colors.background_2.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        }
      ],
      "default": "accent",
      "label": "t:sections.all.colors.label"
    }
  ]
}
{% endschema %}

{% stylesheet %}
.announcement-bar {
  background-color: var(--color-accent);
  color: #ffffff;
  text-align: center;
  padding: 0.75rem var(--page-margin);
  font-size: 0.875rem;
  line-height: 1.4;
  position: relative;
  z-index: var(--z-index-sticky);
}

.announcement-bar__content {
  max-width: var(--page-width);
  margin: 0 auto;
}

.announcement-bar__link {
  color: inherit;
  text-decoration: none;
  display: block;
}

.announcement-bar__link:hover {
  text-decoration: underline;
}

.announcement-bar__text {
  margin: 0;
  font-weight: 500;
}

/* Color Schemes */
.announcement-bar.color-accent {
  background-color: var(--color-accent);
  color: #ffffff;
}

.announcement-bar.color-background-1 {
  background-color: var(--color-background);
  color: var(--color-foreground);
  border-bottom: 1px solid var(--color-border);
}

.announcement-bar.color-background-2 {
  background-color: var(--color-secondary);
  color: #ffffff;
}

.announcement-bar.color-inverse {
  background-color: var(--color-foreground);
  color: var(--color-background);
}

/* Mobile Optimizations */
@media (max-width: 767px) {
  .announcement-bar {
    font-size: 0.8125rem;
    padding: 0.625rem var(--page-margin);
  }
}

/* Animation */
@keyframes slideDown {
  from {
    transform: translateY(-100%);
  }
  to {
    transform: translateY(0);
  }
}

.announcement-bar {
  animation: slideDown 0.3s ease-out;
}
{% endstylesheet %}

{% javascript %}
// Close announcement bar functionality (optional)
document.addEventListener('DOMContentLoaded', function() {
  const announcementBar = document.querySelector('.announcement-bar');
  if (announcementBar && sessionStorage.getItem('announcementBarClosed') === 'true') {
    announcementBar.style.display = 'none';
  }
});
{% endjavascript %}